<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Inductobot.Views.WiFiDeviceControlPage"
             Title="WiFi Device Control">
    
    <Grid RowDefinitions="*,Auto" Padding="20">
        
        <!-- Content Section -->
        <ScrollView Grid.Row="0" Margin="0,0,0,10">
            <VerticalStackLayout Spacing="20">
                
                <!-- Device Info Section -->
                <Frame BackgroundColor="{AppThemeBinding Light=#E3F2FD, Dark=#1A237E}"
                       BorderColor="{AppThemeBinding Light=#2196F3, Dark=#64B5F6}"
                       Padding="15">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="📡 Connected WiFi Device" 
                               FontSize="20" 
                               FontAttributes="Bold"
                               HorizontalOptions="Center"/>
                        
                        <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto" ColumnSpacing="15" RowSpacing="10">
                            <Label Grid.Column="0" Grid.Row="0" Text="Device:" FontAttributes="Bold" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Grid.Row="0" x:Name="DeviceNameLabel" Text="Loading..." VerticalOptions="Center"/>
                            
                            <Label Grid.Column="0" Grid.Row="1" Text="Address:" FontAttributes="Bold" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Grid.Row="1" x:Name="DeviceAddressLabel" Text="Loading..." VerticalOptions="Center"/>
                            
                            <Label Grid.Column="0" Grid.Row="2" Text="Status:" FontAttributes="Bold" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Grid.Row="2" x:Name="ConnectionStatusLabel" Text="Connected" TextColor="Green" VerticalOptions="Center"/>
                            
                            <Label Grid.Column="0" Grid.Row="3" Text="API:" FontAttributes="Bold" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Grid.Row="3" Text="HTTP/HTTPS" VerticalOptions="Center"/>
                        </Grid>
                        
                        <Button x:Name="DisconnectButton"
                                Text="Disconnect"
                                Clicked="OnDisconnectClicked"
                                BackgroundColor="#F44336"
                                TextColor="White"/>
                    </VerticalStackLayout>
                </Frame>
                
                <!-- Device Operations Section -->
                <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}"
                       BorderColor="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                       Padding="15">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="⚙️ Device Operations" 
                               FontSize="18" 
                               FontAttributes="Bold"/>
                        
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="15" RowDefinitions="Auto,Auto,Auto" RowSpacing="15">
                            <!-- Device Info -->
                            <Button Text="Get Device Info"
                                    x:Name="GetInfoButton"
                                    Clicked="OnGetDeviceInfoClicked"
                                    BackgroundColor="#2196F3"
                                    TextColor="White"
                                    Grid.Column="0" Grid.Row="0"/>
                            
                            <!-- WiFi Settings -->
                            <Button Text="WiFi Settings"
                                    x:Name="WiFiSettingsButton" 
                                    Clicked="OnWiFiSettingsClicked"
                                    BackgroundColor="#4CAF50"
                                    TextColor="White"
                                    Grid.Column="1" Grid.Row="0"/>
                            
                            <!-- Start Measurements -->
                            <Button Text="Start Measurements"
                                    x:Name="StartMeasurementsButton"
                                    Clicked="OnStartMeasurementsClicked"
                                    BackgroundColor="#FF9800"
                                    TextColor="White"
                                    Grid.Column="0" Grid.Row="1"/>
                            
                            <!-- Stop Measurements -->
                            <Button Text="Stop Measurements"
                                    x:Name="StopMeasurementsButton"
                                    Clicked="OnStopMeasurementsClicked"
                                    BackgroundColor="#607D8B"
                                    TextColor="White"
                                    Grid.Column="1" Grid.Row="1"/>
                            
                            <!-- Live Reading -->
                            <Button Text="Live Reading"
                                    x:Name="LiveReadingButton"
                                    Clicked="OnLiveReadingClicked"
                                    BackgroundColor="#9C27B0"
                                    TextColor="White"
                                    Grid.Column="0" Grid.Row="2"/>
                            
                            <!-- Custom Command -->
                            <Button Text="Send Command"
                                    x:Name="SendCommandButton"
                                    Clicked="OnSendCustomCommandClicked"
                                    BackgroundColor="#795548"
                                    TextColor="White"
                                    Grid.Column="1" Grid.Row="2"/>
                        </Grid>
                    </VerticalStackLayout>
                </Frame>
                
                <!-- Real-time Data Section -->
                <Frame BackgroundColor="{AppThemeBinding Light=#F0F8FF, Dark=#1A1A2E}"
                       BorderColor="{AppThemeBinding Light=#4A90E2, Dark=#4A90E2}"
                       Padding="15">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="📊 Real-time Data" 
                               FontSize="18" 
                               FontAttributes="Bold"/>
                        
                        <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#2A2A2A}"
                               BorderColor="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                               Padding="15"
                               HeightRequest="150">
                            <ScrollView x:Name="DataScrollView">
                                <Label x:Name="RealTimeDataLabel" 
                                       Text="No data available. Start measurements to see live data."
                                       FontFamily="Consolas"
                                       FontSize="12"
                                       TextColor="Gray"/>
                            </ScrollView>
                        </Frame>
                        
                        <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                            <Button Text="Clear Data"
                                    x:Name="ClearDataButton"
                                    Clicked="OnClearDataClicked"
                                    BackgroundColor="#9E9E9E"
                                    TextColor="White"/>
                            
                            <Button Text="Export Data"
                                    x:Name="ExportDataButton"
                                    Clicked="OnExportDataClicked"
                                    BackgroundColor="#00BCD4"
                                    TextColor="White"
                                    Grid.Column="1"/>
                        </Grid>
                    </VerticalStackLayout>
                </Frame>
                
            </VerticalStackLayout>
        </ScrollView>
        
        <!-- Status Bar -->
        <Frame Grid.Row="1" 
               BackgroundColor="{AppThemeBinding Light=#F0F0F0, Dark=#1A1A1A}"
               BorderColor="Transparent"
               Padding="10,5">
            <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="10">
                <Label Text="📡" FontSize="16" VerticalOptions="Center"/>
                <Label x:Name="StatusLabel" 
                     Text="Connected via WiFi - HTTP API Active" 
                     FontSize="14"
                     VerticalOptions="Center"
                     Grid.Column="1"/>
                <Label x:Name="TimestampLabel" 
                     Text="" 
                     FontSize="12"
                     TextColor="Gray"
                     VerticalOptions="Center"
                     Grid.Column="2"/>
            </Grid>
        </Frame>
        
    </Grid>
</ContentPage>